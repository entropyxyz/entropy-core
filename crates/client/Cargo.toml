[package]
name       ="entropy-client"
version    ="0.0.1"
edition    ="2021"
authors    =['Entropy Cryptography <engineering@entropy.xyz>']
homepage   ='https://entropy.xyz/'
description='Common functionality needed by both entropy-tss and an entropy client'
license    ='AGPL-3.0-or-later'
repository ='https://github.com/entropyxyz/entropy-core'

[dependencies]
sha3          ="0.10.8"
serde         ={ version="1.0", default-features=false, features=["derive"] }
entropy-shared={ path="../shared", default-features=false }
subxt         ={ version="0.35.3", default-features=false, features=["jsonrpsee"] }
num           ="0.4.0"
thiserror     ="1.0.59"
futures       ="0.3"
sp-core       ={ version="31.0.0", default-features=false, features=["full_crypto", "serde"] }
tracing       ="0.1.37"

# Present when "full-client" feature is active
anyhow          ={ version="1.0.82", optional=true }
blake2          ={ version="0.10.4", optional=true }
rand_core       ={ version="0.6.4", optional=true }
serde_json      ={ version="1.0", optional=true }
x25519-dalek    ={ version="2.0.1", features=["static_secrets"], optional=true }
entropy-protocol={ path="../protocol", optional=true }
reqwest         ={ version="0.12.4", features=["json", "stream"], optional=true }
base64          ={ version="0.22.0", optional=true }
synedrion       ={ version="0.1", optional=true }
hex             ={ version="0.4.3", optional=true }

[features]
default=["native", "full-client"]
native=[
  "entropy-shared/std",
  "entropy-shared/user-native",
  "subxt/native",
  "subxt/substrate-compat",
]
wasm=["entropy-shared/wasm", "entropy-shared/user-wasm", "subxt/web"]

# This adds full client functionality. It is behind a feature flag because it is not needed by
# entropy-tss
full-client=[
  "dep:anyhow",
  "dep:blake2",
  "dep:rand_core",
  "dep:serde_json",
  "dep:x25519-dalek",
  "dep:entropy-protocol",
  "dep:reqwest",
  "dep:base64",
  "dep:synedrion",
  "dep:hex",
]
